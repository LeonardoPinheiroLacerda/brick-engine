= GameSound Module Reference
:toc: macro
:toc-title: Table of Contents
:icons: font
:source-highlighter: highlight.js

toc::[]

The `GameSound` module manages audio playback for the engine using the **Web Audio API**. It provides low-latency sound effects and automatic synchronization with the game's mute state.

== API Reference

=== `play(sound: Sound): Promise<void>`

Plays a preloaded sound effect.

**Parameters**

[cols="1,1,3"]
|===
|Name |Type |Description
|`sound` |`xref:../enums/Sound.adoc[Sound]` |The enum identifier of the sound to play.
|===

**Returns**

`Promise<void>` - Resolves when the sound starts playing.

**Behavior**

Automatically resumes the `AudioContext` if it was suspended by the browser. Multiple overlapping instances of the same sound are supported (e.g., rapid-fire effects).

**Example**

[source,typescript]
----
this.modules.sound.play(Sound.ACTION_1);
----


'''

=== `stop(sound: Sound): void`

Stops all active instances of a specific sound.

**Parameters**

[cols="1,1,3"]
|===
|Name |Type |Description
|`sound` |`xref:../enums/Sound.adoc[Sound]` |The enum identifier of the sound to stop.
|===

**Behavior**

Iterates through all currently playing sources of the specified type and stops them immediately.


'''

=== `stopAll(): void`

Stops every sound currently playing in the engine.


'''

=== `toggleMute(): void`

Toggles the master mute status.

**Behavior**

Inverts the `muted` property in `xref:GameState.adoc[GameState]`. This change is automatically persisted to `LocalStorage` and reflected in the audio output.


'''

=== `syncState(state: State): void`

Synchronizes audio settings with the global game state.

**Parameters**

[cols="1,1,3"]
|===
|Name |Type |Description
|`state` |`xref:../interfaces/State.adoc[State]` |The `xref:GameState.adoc[GameState]` instance to link with.
|===

**Behavior**

Implements the `xref:../interfaces/StateSyncable.adoc[StateSyncable]` interface. Subscribes to changes in the `MUTED` property of the provided state and updates the master gain node accordingly.


'''

=== `getDebugData(): Record<string, string | number | boolean>`

Returns metadata for the real-time debugger.

**Returns**

`Record<string, string | number | boolean>` - Object containing `muted`, `active_sources`, and `loaded_buffers`.
