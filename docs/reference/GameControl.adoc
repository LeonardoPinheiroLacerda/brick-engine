= GameControl Module Reference
:toc: macro
:toc-title: Table of Contents
:icons: font
:source-highlighter: highlight.js

toc::[]

The `GameControl` module handles user input from physical keyboards and virtual buttons. It provides an event-based system for reacting to player actions.

== Supported Keys (`ControlKey`)

The engine maps physical keys to virtual engine keys:

*   `UP` / `DOWN` / `LEFT` / `RIGHT`: Directional controls.
*   `ACTION`: Primary action button.
*   `START_PAUSE`: Toggles game start/pause.
*   `RESET`: Soft reset of the game session.
*   `SOUND`: Toggles master audio mute.
*   `COLOR`: Toggles theme color mode.
*   `POWER`: Main engine power toggle.
*   `EXIT`: Hard stop of the engine.

== API Reference

=== `subscribe(key: ControlKey, type: ControlEventType, callback: ControlCallback): void`

Registers a callback for a specific input event.

**Parameters**

[cols="1,1,3"]
|===
|Name |Type |Description
|`key` |`ControlKey` |The virtual key to monitor (e.g., `ControlKey.ACTION`).
|`type` |`ControlEventType` |The type of trigger (`PRESSED` or `HELD`).
|`callback` |`ControlCallback` |The function to execute when the event occurs.
|===

**Behavior**

Adds the callback to the internal subscription list. Multiple callbacks can be registered for the same key/type combination.

**Example**

[source,typescript]
----
control.subscribe(ControlKey.ACTION, ControlEventType.PRESSED, (event) => {
    console.log('Action button pressed!');
});
----

=== `unsubscribe(key: ControlKey, type: ControlEventType, callback: ControlCallback): void`

Removes an existing subscription.

**Parameters**

[cols="1,1,3"]
|===
|Name |Type |Description
|`key` |`ControlKey` |The virtual key.
|`type` |`ControlEventType` |The trigger type.
|`callback` |`ControlCallback` |The reference to the function to remove.
|===

**Behavior**

Removes the specified callback from the list. If the callback is not found, the operation does nothing.

=== `bindControls(): void`

Attaches low-level event listeners to the environment.

**Behavior**

Enables keyboard and button listeners. This is called automatically by the engine during setup.

=== `unbindControls(): void`

Detaches all input listeners and clears subscriptions.

**Behavior**

Removes all low-level event listeners and wipes the internal subscription map. Called automatically during engine destruction.

=== `notify(key: ControlKey, type: ControlEventType): void`

Manually triggers an input event.

**Parameters**

[cols="1,1,3"]
|===
|Name |Type |Description
|`key` |`ControlKey` |The key to notify.
|`type` |`ControlEventType` |The trigger type to simulate.
|===

**Behavior**

Executes all callbacks associated with the given key and event type. This is primarily used internally by the input handler but can be used for automated testing or input simulation.

=== `getDebugData(): Record<string, string | number | boolean>`

Returns metadata for the real-time debugger.

**Returns**

`Record<string, string | number | boolean>` - Object containing the number of `total_subscribers` and `tracked_keys`.


