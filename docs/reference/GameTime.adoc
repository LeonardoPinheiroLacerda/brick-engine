= GameTime Module
:toc: macro
:toc-title: Table of Contents
:icons: font
:source-highlighter: highlight.js

toc::[]

The `GameTime` module manages the game loop timing. It separates game logic "ticks" from rendering frames, allowing for consistent game speed regardless of frame rate.

== Concepts

* **Tick**: A single step of game logic (e.g., moving a piece down one cell).
* **Tick Interval**: The time in milliseconds between ticks. A lower interval means the game runs faster.

== API Reference

=== `shouldTick(): boolean`

Returns `true` if enough time has passed since the last tick to run logic again.

**Returns**

`boolean` - `true` if a tick should occur.

**Behavior**

Checks if accumulated time >= tick interval. If true, subtracts tick interval from accumulator and returns `true`.

**Example**

[source,typescript]
----
while (this.modules.time.shouldTick()) {
    this.update();
}
----

=== `update(deltaTime: number): void`

Accumulates time from the render loop.

**Parameters**

[cols="1,1,3"]
|===
|Name |Type |Description
|`deltaTime` |`number` |Time elapsed since last frame (ms).
|===

**Behavior**

Adds `deltaTime` to the internal accumulator.

**Example**

[source,typescript]
----
// Internal usage
this.modules.time.update(p.deltaTime);
----

=== `reset(): void`

Resets the time accumulator to zero.

**Behavior**

Useful when restarting a game or coming back from a pause to prevent a "burst" of ticks.

=== `tickInterval: number`

Getter/Setter for the logic tick interval in milliseconds.

**Parameters (Setter)**

[cols="1,1,3"]
|===
|Name |Type |Description
|`value` |`number` |New interval in ms.
|===

**Returns (Getter)**

`number` - Current interval in ms.

**Behavior**

Lower values make the game run faster (more ticks per second).

**Example**

[source,typescript]
----
// Double speed
this.modules.time.tickInterval = 250;
----

=== `incrementTickInterval(amount: number): void`

Increases the interval (slower game).

**Parameters**

[cols="1,1,3"]
|===
|Name |Type |Description
|`amount` |`number` |Milliseconds to add.
|===

**Behavior**

Adds `amount` to current `tickInterval`.

**Example**

[source,typescript]
----
this.modules.time.incrementTickInterval(50);
----

=== `decrementTickInterval(amount: number): void`

Decreases the interval (faster game).

**Parameters**

[cols="1,1,3"]
|===
|Name |Type |Description
|`amount` |`number` |Milliseconds to subtract.
|===

**Behavior**

Subtracts `amount` from `tickInterval`, clamped to a minimum value.

**Example**

[source,typescript]
----
this.modules.time.decrementTickInterval(50);
----

=== `getDebugData(): Record<string, string | number | boolean>`

Returns the debug data for the module.

**Returns**

`Record<string, string | number | boolean>` - Object containing `fps`, `tps`, `tick_interval`, and `accumulated_time`.

=== `renderPerformanceMonitor(p: P5): void`

Renders a performance overlay (TPS/FPS) if enabled.

**Parameters**

[cols="1,1,3"]
|===
|Name |Type |Description
|`p` |`P5` |The P5 instance to render with.
|===

**Behavior**

Draws logic and render performance metrics to the screen. Works in conjunction with `GameTimeWithPerformanceMonitor`.


This is commonly used to increase difficulty as the player progresses.

== Performance Monitor

There is a `GameTimeWithPerformanceMonitor` variant that tracks logic execution time, mostly used for debugging and profiling.
