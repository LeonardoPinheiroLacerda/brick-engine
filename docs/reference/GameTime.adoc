= GameTime Module
:toc: macro
:toc-title: Table of Contents
:icons: font
:source-highlighter: highlight.js

toc::[]

The `GameTime` module manages the game loop timing. It separates game logic "ticks" from rendering frames, allowing for consistent game speed regardless of frame rate.

== Concepts

* **Tick**: A single step of game logic (e.g., moving a piece down one cell).
* **Tick Interval**: The time in milliseconds between ticks. A lower interval means the game runs faster.

== API Reference

=== Time Management

==== `shouldTick(): boolean`

Returns `true` if enough time has passed since the last tick to run logic again.

*   **Params**:
    *   None
*   **Returns**:
    *   `boolean`: `true` if a tick should occur.
*   **Behavior**:
    *   Checks if accumulated time >= tick interval.
    *   Subtracts tick interval from accumulator if true.
*   **Example**:

[source,typescript]
----
if (this.modules.time.shouldTick()) {
==== `update(deltaTime: number): void`

Accumulates time from the render loop.

**Parameters**

[cols="1,1,3"]
|===
|Name |Type |Description
|`deltaTime` |`number` |Time elapsed since last frame (ms).
|===


**Behavior**

Adds `deltaTime` to the internal accumulator.

**Example**

[source,typescript]
----
// Internal usage
this.modules.time.update(p.deltaTime);
----

=== `shouldTick(): boolean`

Determines if a game logic tick should occur.


**Returns**

`boolean` - `true` if accumulator >= tick interval.

**Behavior**

Checks if enough time has passed. If yes, subtracts the interval from the accumulator and returns `true`.

**Example**

[source,typescript]
----
while (this.modules.time.shouldTick()) {
    this.processTick();
}
----

=== Speed Control

==== `tickInterval: number`

Getter/Setter for the logic tick interval in milliseconds.

*   **Params**:
    *   `value`: New interval in ms (Setter).
*   **Returns**:
    *   `number`: Current interval in ms (Getter).
*   **Behavior**:
    *   Lower values make the game run faster (more ticks per second).
*   **Example**:

[source,typescript]
----
// Double speed
this.modules.time.tickInterval = 250;
----

==== `incrementTickInterval(amount: number): void`

Increases the interval (slower game).

*   **Params**:
    *   `amount`: Milliseconds to add.
*   **Returns**:
    *   `void`
*   **Behavior**:
    *   Adds `amount` to current `tickInterval`.
*   **Example**:

[source,typescript]
----
this.modules.time.incrementTickInterval(50);
----

==== `decrementTickInterval(amount: number): void`

Decreases the interval (faster game).

*   **Params**:
    *   `amount`: Milliseconds to subtract.
*   **Returns**:
    *   `void`
*   **Behavior**:
    *   Subtracts `amount` from `tickInterval`.
    *   Clamps to a minimum value (e.g., 10ms).
*   **Example**:

[source,typescript]
----
this.modules.time.decrementTickInterval(50);
----

This is commonly used to increase difficulty as the player progresses.

=== Performance Monitor

There is a `GameTimeWithPerformanceMonitor` variant that tracks logic execution time, mostly used for debugging and profiling.
